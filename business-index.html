<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Business Profit and Loss Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input {
            width: 100%;
            padding: 8px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .button-group {
            text-align: center;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background-color: #45a049;
        }

        #results {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            display: none;
            text-align: center;
        }

        #results p {
            font-size: 18px;
            margin: 10px 0;
        }

        #view-summary-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #ff9800;
            font-size: 18px;
        }

        #view-summary-btn:hover {
            background-color: #e68900;
        }

        /* Popup Styles */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .popup-content input {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            font-size: 16px;
            border-radius: 5px;
        }

        .popup-content button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
        }

        .popup-content button:hover {
            background-color: #45a049;
        }

        #close-popup-btn {
            background-color: #f44336;
            margin-top: 10px;
        }

        #close-popup-btn:hover {
            background-color: #d32f2f;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Business Profit and Loss Calculator</h1>
        <form id="calculator-form">
            <!-- Business Name -->
            <div class="input-group">
                <label for="business-name">Business Name:</label>
                <input type="text" id="business-name" placeholder="Enter your business name" required>
            </div>
            
            <!-- Your Name -->
            <div class="input-group">
                <label for="user-name">Your Name:</label>
                <input type="text" id="user-name" placeholder="Enter your name" required>
            </div>
            
            <!-- City -->
            <div class="input-group">
                <label for="user-city">City:</label>
                <input type="text" id="user-city" placeholder="Enter your city" required>
            </div>

            <!-- Starting Amount -->
            <div class="input-group">
                <label for="start-amount">Initial Investment Amount:</label>
                <input type="number" id="start-amount" placeholder="Enter starting amount" required>
            </div>

            <!-- Business Start Year -->
            <div class="input-group">
                <label for="business-start-year">Business Start Year:</label>
                <input type="number" id="business-start-year" placeholder="Enter year business started" required>
            </div>

            <!-- Optional Business Start Month -->
            <div class="input-group">
                <label for="business-start-month">Business Start Month (Optional):</label>
                <input type="number" id="business-start-month" placeholder="Enter month (1-12)">
            </div>

            <!-- Monthly Sales -->
            <div class="input-group">
                <label for="monthly-sales">Monthly Sales(Avg):</label>
                <input type="number" id="monthly-sales" placeholder="Enter monthly sales" required>
            </div>

            <!-- Staff Salaries -->
            <div class="input-group">
                <label for="staff-salaries">Staff Salaries (per month):</label>
                <input type="number" id="staff-salaries" placeholder="Enter staff salaries" required>
            </div>

            <!-- Other Expenses -->
            <div class="input-group">
                <label for="other-expenses">Other Expenses (per month):</label>
                <input type="number" id="other-expenses" placeholder="Enter other expenses" required>
            </div>

            <!-- Personal Expenses -->
            <div class="input-group">
                <label for="personal-expenses">Personal Expenses(Avg):</label>
                <input type="number" id="personal-expenses" placeholder="Enter personal expenses" required>
            </div>

            <!-- Operating Expenses -->
            <div class="input-group">
                <label for="operating-expenses">Operating Expenses:</label>
                <input type="number" id="operating-expenses" placeholder="Enter operating expenses" required>
            </div>

            <!-- Gross Margin -->
            <div class="input-group">
                <label for="gross-margin">Gross Margin (%):</label>
                <input type="number" id="gross-margin" placeholder="Enter gross margin percentage" required>
            </div>

            <!-- Taxes -->
            <div class="input-group">
                <label for="taxes">Taxes:</label>
                <input type="number" id="taxes" placeholder="Enter taxes" required>
            </div>

            <!-- Other Income -->
            <div class="input-group">
                <label for="other-income">Other Income:</label>
                <input type="number" id="other-income" placeholder="Enter other income" required>
            </div>

            <!-- Calculate Button -->
            <div class="button-group">
                <button type="button" id="calculate-btn">Calculate</button>
            </div>

            <!-- Results (Initially Hidden) -->
            <div id="results">
                <h3>Results for <span id="business-name-result"></span></h3>
                <p id="total-expenses">Total Monthly Expenses: ₹0</p>
                <p id="gross-profit">Gross Profit: ₹0</p>
                <p id="net-profit">Monthly Net Profit: ₹0</p>
                <p id="estimated-bank-balance">Estimated Bank Balance: ₹0</p>
                <p id="profit-since-start">Profit Since Start: ₹0</p>
                <p id="monthly-profit">Monthly Profit: ₹0</p>
            </div>
        </form>
    </div>

    <!-- Pop-Up for Contact Details -->
    <div id="contact-popup" class="popup">
        <div class="popup-content">
            <h2>Enter Your Contact Details</h2>
            <label for="whatsapp">WhatsApp Number:</label>
            <input type="text" id="whatsapp" placeholder="Enter your WhatsApp number" required>
            <label for="email">Email Address:</label>
            <input type="email" id="email" placeholder="Enter your email address" required>
            <button id="submit-details-btn">Submit</button>
            <button id="close-popup-btn">Close</button>
        </div>
    </div>

    <script>
        document.getElementById("calculate-btn").addEventListener("click", function() {
            // Show the popup for contact details
            document.getElementById("contact-popup").style.display = "flex";
        });

        document.getElementById("close-popup-btn").addEventListener("click", function() {
            document.getElementById("contact-popup").style.display = "none";
        });

        document.getElementById("submit-details-btn").addEventListener("click", function() {
            let whatsapp = document.getElementById("whatsapp").value;
            let email = document.getElementById("email").value;

            if (whatsapp && email) {
                // Close the popup
                document.getElementById("contact-popup").style.display = "none";

                // Get values from the calculator form
                let businessName = document.getElementById("business-name").value;
                let startAmount = parseFloat(document.getElementById("start-amount").value) || 0;
                let monthlySales = parseFloat(document.getElementById("monthly-sales").value) || 0;
                let staffSalaries = parseFloat(document.getElementById("staff-salaries").value) || 0;
                let otherExpenses = parseFloat(document.getElementById("other-expenses").value) || 0;
                let personalExpenses = parseFloat(document.getElementById("personal-expenses").value) || 0;
                let operatingExpenses = parseFloat(document.getElementById("operating-expenses").value) || 0;
                let grossMarginPercent = parseFloat(document.getElementById("gross-margin").value) || 0;
                let taxes = parseFloat(document.getElementById("taxes").value) || 0;
                let otherIncome = parseFloat(document.getElementById("other-income").value) || 0;
                let businessStartYear = parseInt(document.getElementById("business-start-year").value);
                let businessStartMonth = parseInt(document.getElementById("business-start-month").value) || 1; // Default to January if month is not provided
                let currentDate = new Date();

                // Calculate Business Start Date
                let businessStartDate = new Date(businessStartYear, businessStartMonth - 1, 1); // Month is 0-indexed

                // Calculate Gross Profit
                let grossProfit = monthlySales * (grossMarginPercent / 100);

                // Calculate Monthly Expenses
                let totalMonthlyExpenses = staffSalaries + otherExpenses + personalExpenses + operatingExpenses + taxes;

                // Calculate Monthly Net Profit
                let monthlyNetProfit = grossProfit - totalMonthlyExpenses + otherIncome;

                // Calculate Profit Since Business Started
                let monthsSinceStart = Math.floor((currentDate - businessStartDate) / (1000 * 60 * 60 * 24 * 30)); // Approximate months
                let totalProfitSinceStart = monthlyNetProfit * monthsSinceStart;

                // Calculate Estimated Bank Balance
                let estimatedBankBalance = startAmount + totalProfitSinceStart;

                // Show results
                document.getElementById("results").style.display = "block";
                document.getElementById("business-name-result").innerText = businessName;
                document.getElementById("total-expenses").innerText = "Total Monthly Expenses: ₹ " + totalMonthlyExpenses.toFixed(2);
                document.getElementById("gross-profit").innerText = "Gross Profit: ₹ " + grossProfit.toFixed(2);
                document.getElementById("net-profit").innerText = "Monthly Net Profit: ₹ " + monthlyNetProfit.toFixed(2);
                document.getElementById("estimated-bank-balance").innerText = "Estimated Bank Balance: ₹ " + estimatedBankBalance.toFixed(2);
                document.getElementById("profit-since-start").innerText = "Profit Since Start: ₹ " + totalProfitSinceStart.toFixed(2);
                document.getElementById("monthly-profit").innerText = "Monthly Profit: ₹ " + monthlyNetProfit.toFixed(2);

                alert("Thank you! You can now see your detailed summary.");
            } else {
                alert("Please fill in both WhatsApp number and email address.");
            }
        });
    </script>
</body>
</html>
